<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>main page</title>
        
        <!-- Including the A-frame library, previous version for compatibility with text geometry -->
        <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
        <script src="../js/A-Frame_CSG.js"></script>
        <script src="../js/ScenarioScript.js"></script>

    </head>
    <body>
        <a-scene>
            <a-sky color="#ADE4FF"></a-sky>

            <!-- Default lighting injected by A-Frame. -->
            <a-entity light="type: ambient; color: #BBB"></a-entity>
            <a-entity light="type: directional; color: #FFF; intensity: 0.5" position="0 5 3"></a-entity>

            <!-- Camera -->
            <a-camera position="0 0 16"  fov="60" wasd-controls="fly: true"></a-camera>

            <!-- Top of the circus for door -->
            <a-entity id="Top Collection" position="0 5 0" rotation="0 0 0" scale="1 1 1" visible="false">
                <a-entity id="First top Stage" position="0 0 0" rotation="0 0 0" scale="1 1 1">
                    <a-sphere id="sphere1"
                        position="0 0.2 0" 
                        rotation="0 0 0" 
                        scale="0.5 0.5 1"
                        material="opacity: 0.3; color: blue">
                    </a-sphere>

                    <a-cone id="Top1"
                        position="0 0 0" 
                        rotation="0 0 0" 
                        scale="1.5 1 1.5"
                        color="red"
                        csg-meshs="subtract: #sphere1">
                    </a-cone>
                </a-entity>

                <a-entity id="Second top stage" position="4 0 0" rotation="0 0 0" scale="1 1 1">
                    <a-sphere id="sphere2"
                        position="1 0 0" 
                        rotation="0 0 45" 
                        scale="0.3 0.6 1"
                        material="opacity: 0.5; color: blue">
                    </a-sphere>

                    <a-sphere id="sphere3"
                        position="-1 0 0" 
                        rotation="0 0 -45" 
                        scale="0.3 0.6 1"
                        material="opacity: 0.5; color: blue">
                    </a-sphere>

                    <a-entity id="Top2"
                        position="0 0 0" 
                        rotation="0 0 0" 
                        scale="1.5 1 1.5"
                        freeze-csg-result="source: #Top1; delay: 2000; color: red"
                        csg-meshs="subtract: #sphere2, #sphere3">
                    </a-entity>
                </a-entity>
            </a-entity>

            <a-text value="THE CIRCUS"  color="black" align="center" position="0 5 0" rotation="0 0 0" scale="4 4 4"></a-text>
            <a-text value="THE CIRCUS"  color="yellow" align="center" position="0 5 0.1" rotation="0 0 0" scale="4.1 4.2 4.2"></a-text>
            <!-- The circus  -->              
            <a-entity flag="stage: 2; color1: yellow; color2: brown; showOperations: false" position="2.35 3.7 -1" rotation="0 0 0" scale="0.6 0.6 0.6"></a-entity>
            <a-entity flag="stage: 2; color1: yellow; color2: brown; showOperations: false" position="-1.275 3.7 -1" rotation="0 0 0" scale="0.6 0.6 0.6"></a-entity>
            <a-entity top="stage: 4; color1: white; color2: red; color3: yellow; showOperations: false" position="0 2.5 -1" rotation="0 0 0" scale="3.4 3 3.4"></a-entity>
            <a-cylinder color="black" position="0 0 -1" rotation="0 0 0" scale="3 2 3"></a-cylinder>
            <a-cylinder color="black" position="0 0 -1" rotation="0 0 0" scale="4.3 2 3.5" opacity="0.7"></a-cylinder>
            <a-cylinder color="black" position="0 0 -1" rotation="0 0 0" scale="4.3 2 4" opacity="0.6"></a-cylinder>
            <a-cylinder color="black" position="0 0 -1" rotation="0 0 0" scale="4.3 2 4.3" opacity="0.5"></a-cylinder>
            <a-entity animation=" property: position; from: -1 0 0; to: 1 0 0; dur: 5000; dir: alternate; loop: true;">
                <a-cone 
                    color="white" 
                    position="-1.5 4 4" 
                    rotation="180 -45 0" 
                    scale="0.8 10 0.8" 
                    opacity="0.4"
                    animation="
                        property: rotation;
                        from: 180 0 -10; 
                        to: 180 0 10;
                        dur: 5000;
                        dir: alternate; 
                        loop: true;">
                </a-cone>
            </a-entity>

            <a-entity animation=" property: position; from: 1 0 0; to: -1 0 0; dur: 5000; dir: alternate; loop: true;">
                <a-cone 
                    color="white" 
                    position="1.5 4 4" 
                    rotation="180 -45 0" 
                    scale="0.8 10 0.8" 
                    opacity="0.4"
                    animation="
                        property: rotation;
                        from: 180 0 10; 
                        to: 180 0 -10;
                        dur: 5000;
                        dir: alternate; 
                        loop: true;">
                </a-cone>
            </a-entity>
            
            <a-entity base="stage: 3; color1: red; color2: white; showOperations: false" position="0 0 -1" rotation="0 0 0" scale="3 2 3"></a-entity>
            <a-entity id="door" position="0 -0.4 3.34" rotation="0 0 0" scale="0.7 0.8 1">
                <a-entity id="First Door Stage" position="0 0 " rotation="0 0 0" scale="1 1 1">
                    <a-entity id="Top1Copy"
                        position="0 0.5 -0.2" 
                        rotation="0 0 0" 
                        scale="1.3 1 1"
                        freeze-csg-result="source: #Top2; delay: 0; color: blue; opacity: 0">
                    </a-entity>

                    <a-entity id="Door"
                        door="stage: 1; color1: yellow; showOperations: true"
                        position="0 0 0" 
                        rotation="0 0 0" 
                        scale="1 1.5 0.7"
                        csg-meshs="subtract: #Top1Copy, #cube2">
                    </a-entity>

                </a-entity>
            </a-entity>
            <a-entity ground="stage: 2; color1: brown; color2: green; showOperations: false" position="0 -1 0" rotation="0 0 0" scale="8 4 8"></a-entity>
            
            
        </a-scene>
    </body>
</html>